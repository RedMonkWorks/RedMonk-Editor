{"ast":null,"code":"var _jsxFileName = \"D:\\\\Pusher\\\\client\\\\src\\\\App.js\";\nimport React, { Component } from \"react\";\nimport { Controlled as CodeMirror } from \"react-codemirror2\";\nimport Pusher from \"pusher-js\";\nimport pushid from \"pushid\";\nimport axios from \"axios\";\nimport ReactDOM from 'react-dom';\nimport FileBrowser from 'react-keyed-file-browser';\nimport \"codemirror/lib/codemirror.css\";\nimport \"codemirror/theme/material.css\";\nimport \"codemirror/mode/htmlmixed/htmlmixed\";\nimport \"codemirror/mode/css/css\";\nimport \"codemirror/mode/javascript/javascript\";\nimport \"./App.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass NestedEditableDemo extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      files: [{\n        key: 'index.js',\n        size: 1.5 * 1024 * 1024\n      }, {\n        key: 'App.css',\n        size: 545 * 1024\n      }]\n    };\n\n    this.handleCreateFolder = key => {\n      this.setState(state => {\n        state.files = state.files.concat([{\n          key: key\n        }]);\n        return state;\n      });\n    };\n\n    this.handleCreateFiles = (files, prefix) => {\n      this.setState(state => {\n        const newFiles = files.map(file => {\n          let newKey = prefix;\n\n          if (prefix !== '' && prefix.substring(prefix.length - 1, prefix.length) !== '/') {\n            newKey += '/';\n          }\n\n          newKey += file.name;\n          return {\n            key: newKey,\n            size: file.size,\n            modified: +Moment()\n          };\n        });\n        const uniqueNewFiles = [];\n        newFiles.map(newFile => {\n          let exists = false;\n          state.files.map(existingFile => {\n            if (existingFile.key === newFile.key) {\n              exists = true;\n            }\n          });\n\n          if (!exists) {\n            uniqueNewFiles.push(newFile);\n          }\n        });\n        state.files = state.files.concat(uniqueNewFiles);\n        return state;\n      });\n    };\n\n    this.handleRenameFolder = (oldKey, newKey) => {\n      this.setState(state => {\n        const newFiles = [];\n        state.files.map(file => {\n          if (file.key.substr(0, oldKey.length) === oldKey) {\n            newFiles.push({ ...file,\n              key: file.key.replace(oldKey, newKey),\n              modified: +Moment()\n            });\n          } else {\n            newFiles.push(file);\n          }\n        });\n        state.files = newFiles;\n        return state;\n      });\n    };\n\n    this.handleRenameFile = (oldKey, newKey) => {\n      this.setState(state => {\n        const newFiles = [];\n        state.files.map(file => {\n          if (file.key === oldKey) {\n            newFiles.push({ ...file,\n              key: newKey,\n              modified: +Moment()\n            });\n          } else {\n            newFiles.push(file);\n          }\n        });\n        state.files = newFiles;\n        return state;\n      });\n    };\n\n    this.handleDeleteFolder = folderKey => {\n      this.setState(state => {\n        const newFiles = [];\n        state.files.map(file => {\n          if (file.key.substr(0, folderKey.length) !== folderKey) {\n            newFiles.push(file);\n          }\n        });\n        state.files = newFiles;\n        return state;\n      });\n    };\n\n    this.handleDeleteFile = fileKey => {\n      this.setState(state => {\n        const newFiles = [];\n        state.files.map(file => {\n          if (file.key !== fileKey) {\n            newFiles.push(file);\n          }\n        });\n        state.files = newFiles;\n        return state;\n      });\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(FileBrowser, {\n      files: this.state.files,\n      icons: Icons.FontAwesome(4),\n      onCreateFolder: this.handleCreateFolder,\n      onCreateFiles: this.handleCreateFiles,\n      onMoveFolder: this.handleRenameFolder,\n      onMoveFile: this.handleRenameFile,\n      onRenameFolder: this.handleRenameFolder,\n      onRenameFile: this.handleRenameFile,\n      onDeleteFolder: this.handleDeleteFolder,\n      onDeleteFile: this.handleDeleteFile\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nconst mount = document.querySelectorAll('div.demo-mount-nested-editable');\nReactDOM.render( /*#__PURE__*/_jsxDEV(NestedEditableDemo, {}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 156,\n  columnNumber: 3\n}, this), mount[0]);\n\nclass App extends Component {\n  constructor() {\n    super();\n\n    this.syncUpdates = () => {\n      const data = { ...this.state\n      };\n      axios.post(\"http://localhost:5000/update-editor\", data).catch(console.error);\n    };\n\n    this.runCode = () => {\n      const {\n        html,\n        css,\n        js\n      } = this.state;\n      const iframe = this.refs.iframe;\n      const document = iframe.contentDocument;\n      const documentContents = `\n      <!DOCTYPE html>\n      <html lang=\"en\">\n      <head>\n        <meta charset=\"UTF-8\">\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n        <meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\">\n        <title>Document</title>\n        <style>\n          ${css}\n        </style>\n      </head>\n      <body>\n        ${html}\n\n        <script type=\"text/javascript\">\n          ${js}\n        </script>\n      </body>\n      </html>\n    `;\n      document.open();\n      document.write(documentContents);\n      document.close();\n    };\n\n    this.state = {\n      id: \"\",\n      html: \"\",\n      css: \"\",\n      js: \"\"\n    };\n    this.pusher = new Pusher(\"18160601861a89d7f8f7\", {\n      cluster: \"eu\",\n      forceTLS: true\n    });\n    this.channel = this.pusher.subscribe(\"editor\");\n  }\n\n  componentDidUpdate() {\n    this.runCode();\n  }\n\n  componentDidMount() {\n    this.setState({\n      id: pushid()\n    });\n    this.channel.bind(\"text-update\", data => {\n      const {\n        id\n      } = this.state;\n      if (data.id === id) return;\n      this.setState({\n        html: data.html,\n        css: data.css,\n        js: data.js\n      });\n    });\n  }\n\n  render() {\n    const {\n      html,\n      js,\n      css\n    } = this.state;\n    const codeMirrorOptions = {\n      theme: \"material\",\n      lineNumbers: true,\n      scrollbarStyle: null,\n      lineWrapping: true\n    };\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: [/*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"files\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"title-header\",\n          children: \"FILES\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"playground\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"code-editor html-code\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"title-header\",\n            children: \"EDITOR\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 256,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CodeMirror, {\n            value: html,\n            options: {\n              mode: \"htmlmixed\",\n              ...codeMirrorOptions\n            },\n            onBeforeChange: (editor, data, html) => {\n              this.setState({\n                html\n              }, () => this.syncUpdates());\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"result\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"title-header\",\n          children: \"RESULT\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"iframe\", {\n          title: \"result\",\n          className: \"iframe\",\n          ref: \"iframe\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["D:/Pusher/client/src/App.js"],"names":["React","Component","Controlled","CodeMirror","Pusher","pushid","axios","ReactDOM","FileBrowser","NestedEditableDemo","state","files","key","size","handleCreateFolder","setState","concat","handleCreateFiles","prefix","newFiles","map","file","newKey","substring","length","name","modified","Moment","uniqueNewFiles","newFile","exists","existingFile","push","handleRenameFolder","oldKey","substr","replace","handleRenameFile","handleDeleteFolder","folderKey","handleDeleteFile","fileKey","render","Icons","FontAwesome","mount","document","querySelectorAll","App","constructor","syncUpdates","data","post","catch","console","error","runCode","html","css","js","iframe","refs","contentDocument","documentContents","open","write","close","id","pusher","cluster","forceTLS","channel","subscribe","componentDidUpdate","componentDidMount","bind","codeMirrorOptions","theme","lineNumbers","scrollbarStyle","lineWrapping","mode","editor"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Controlled as CodeMirror } from \"react-codemirror2\";\nimport Pusher from \"pusher-js\";\nimport pushid from \"pushid\";\nimport axios from \"axios\";\nimport ReactDOM from 'react-dom';\n\nimport FileBrowser from 'react-keyed-file-browser';\n\n\nimport \"codemirror/lib/codemirror.css\";\nimport \"codemirror/theme/material.css\";\n\nimport \"codemirror/mode/htmlmixed/htmlmixed\";\nimport \"codemirror/mode/css/css\";\nimport \"codemirror/mode/javascript/javascript\";\n\nimport \"./App.css\";\n\n\nclass NestedEditableDemo extends React.Component {\n  state = {\n    files: [\n      {\n        key: 'index.js',\n        size: 1.5 * 1024 * 1024,\n      },\n      {\n        key: 'App.css',\n        size: 545 * 1024,\n      },\n    ],\n  }\n\n  handleCreateFolder = (key) => {\n    this.setState(state => {\n      state.files = state.files.concat([{\n        key: key,\n      }])\n      return state\n    })\n  }\n  handleCreateFiles = (files, prefix) => {\n    this.setState(state => {\n      const newFiles = files.map((file) => {\n        let newKey = prefix\n        if (prefix !== '' && prefix.substring(prefix.length - 1, prefix.length) !== '/') {\n          newKey += '/'\n        }\n        newKey += file.name\n        return {\n          key: newKey,\n          size: file.size,\n          modified: +Moment(),\n        }\n      })\n\n      const uniqueNewFiles = []\n      newFiles.map((newFile) => {\n        let exists = false\n        state.files.map((existingFile) => {\n          if (existingFile.key === newFile.key) {\n            exists = true\n          }\n        })\n        if (!exists) {\n          uniqueNewFiles.push(newFile)\n        }\n      })\n      state.files = state.files.concat(uniqueNewFiles)\n      return state\n    })\n  }\n  handleRenameFolder = (oldKey, newKey) => {\n    this.setState(state => {\n      const newFiles = []\n      state.files.map((file) => {\n        if (file.key.substr(0, oldKey.length) === oldKey) {\n          newFiles.push({\n            ...file,\n            key: file.key.replace(oldKey, newKey),\n            modified: +Moment(),\n          })\n        } else {\n          newFiles.push(file)\n        }\n      })\n      state.files = newFiles\n      return state\n    })\n  }\n  handleRenameFile = (oldKey, newKey) => {\n    this.setState(state => {\n      const newFiles = []\n      state.files.map((file) => {\n        if (file.key === oldKey) {\n          newFiles.push({\n            ...file,\n            key: newKey,\n            modified: +Moment(),\n          })\n        } else {\n          newFiles.push(file)\n        }\n      })\n      state.files = newFiles\n      return state\n    })\n  }\n  handleDeleteFolder = (folderKey) => {\n    this.setState(state => {\n      const newFiles = []\n      state.files.map((file) => {\n        if (file.key.substr(0, folderKey.length) !== folderKey) {\n          newFiles.push(file)\n        }\n      })\n      state.files = newFiles\n      return state\n    })\n  }\n  handleDeleteFile = (fileKey) => {\n    this.setState(state => {\n      const newFiles = []\n      state.files.map((file) => {\n        if (file.key !== fileKey) {\n          newFiles.push(file)\n        }\n      })\n      state.files = newFiles\n      return state\n    })\n  }\n\n  render() {\n    return (\n      <FileBrowser\n        files={this.state.files}\n        icons={Icons.FontAwesome(4)}\n\n        onCreateFolder={this.handleCreateFolder}\n        onCreateFiles={this.handleCreateFiles}\n        onMoveFolder={this.handleRenameFolder}\n        onMoveFile={this.handleRenameFile}\n        onRenameFolder={this.handleRenameFolder}\n        onRenameFile={this.handleRenameFile}\n        onDeleteFolder={this.handleDeleteFolder}\n        onDeleteFile={this.handleDeleteFile}\n      />\n    )\n  }\n}\n\nconst mount = document.querySelectorAll('div.demo-mount-nested-editable')\nReactDOM.render(\n  <NestedEditableDemo />,\n  mount[0]\n)\n\nclass App extends Component {\n  constructor() {\n    super();\n    this.state = {\n      id: \"\",\n      html: \"\",\n      css: \"\",\n      js: \"\"\n    };\n\n    this.pusher = new Pusher(\"18160601861a89d7f8f7\", {\n      cluster: \"eu\",\n      forceTLS: true\n    });\n\n    this.channel = this.pusher.subscribe(\"editor\");\n  }\n\n  componentDidUpdate() {\n    this.runCode();\n  }\n\n  componentDidMount() {\n    this.setState({\n      id: pushid()\n    });\n\n    this.channel.bind(\"text-update\", data => {\n      const { id } = this.state;\n      if (data.id === id) return;\n\n      this.setState({\n        html: data.html,\n        css: data.css,\n        js: data.js\n      });\n    });\n  }\n\n  syncUpdates = () => {\n    const data = { ...this.state };\n\n    axios\n      .post(\"http://localhost:5000/update-editor\", data)\n      .catch(console.error);\n  };\n\n  runCode = () => {\n    const { html, css, js } = this.state;\n\n    const iframe = this.refs.iframe;\n    const document = iframe.contentDocument;\n    const documentContents = `\n      <!DOCTYPE html>\n      <html lang=\"en\">\n      <head>\n        <meta charset=\"UTF-8\">\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n        <meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\">\n        <title>Document</title>\n        <style>\n          ${css}\n        </style>\n      </head>\n      <body>\n        ${html}\n\n        <script type=\"text/javascript\">\n          ${js}\n        </script>\n      </body>\n      </html>\n    `;\n\n    document.open();\n    document.write(documentContents);\n    document.close();\n  };\n\n  render() {\n    const { html, js, css } = this.state;\n    const codeMirrorOptions = {\n      theme: \"material\",\n      lineNumbers: true,\n      scrollbarStyle: null,\n      lineWrapping: true\n    };\n\n    return (\n      <div className=\"App\">\n        <section className=\"files\">\n          <div className=\"title-header\">FILES</div>\n        </section>\n\n        <section className=\"playground\">\n          <div className=\"code-editor html-code\">\n            <div className=\"title-header\">EDITOR</div>\n            <CodeMirror\n              value={html}\n              options={{\n                mode: \"htmlmixed\",\n                ...codeMirrorOptions\n              }}\n              onBeforeChange={(editor, data, html) => {\n                this.setState({ html }, () => this.syncUpdates());\n              }}\n            />\n          </div>\n          {/* <div className=\"code-editor css-code\">\n            <div className=\"editor-header\">CSS</div>\n            <CodeMirror\n              value={css}\n              options={{\n                mode: \"css\",\n                ...codeMirrorOptions\n              }}\n              onBeforeChange={(editor, data, css) => {\n                this.setState({ css }, () => this.syncUpdates());\n              }}\n            />\n          </div>\n          <div className=\"code-editor js-code\">\n            <div className=\"editor-header\">JavaScript</div>\n            <CodeMirror\n              value={js}\n              options={{\n                mode: \"javascript\",\n                ...codeMirrorOptions\n              }}\n              onBeforeChange={(editor, data, js) => {\n                this.setState({ js }, () => this.syncUpdates());\n              }}\n            />\n          </div> */}\n        </section>\n\n        <section className=\"result\">\n          <div className=\"title-header\">RESULT</div>\n          <iframe title=\"result\" className=\"iframe\" ref=\"iframe\" />\n        </section>\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}