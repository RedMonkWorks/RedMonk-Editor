{"ast":null,"code":"var _jsxFileName = \"D:\\\\Pusher\\\\client\\\\src\\\\App.js\";\nimport React, { Component } from \"react\";\nimport { Controlled as CodeMirror } from \"react-codemirror2\";\nimport Pusher from \"pusher-js\";\nimport pushid from \"pushid\";\nimport axios from \"axios\";\nimport ReactDOM from 'react-dom';\nimport FileBrowser from 'react-keyed-file-browser';\nimport \"codemirror/lib/codemirror.css\";\nimport \"codemirror/theme/material.css\";\nimport \"codemirror/mode/htmlmixed/htmlmixed\";\nimport \"codemirror/mode/css/css\";\nimport \"codemirror/mode/javascript/javascript\";\nimport \"./App.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass NestedEditableDemo extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      files: [{\n        key: 'photos/animals/cat in a hat.png',\n        modified: +Moment().subtract(1, 'hours'),\n        size: 1.5 * 1024 * 1024\n      }, {\n        key: 'photos/animals/kitten_ball.png',\n        modified: +Moment().subtract(3, 'days'),\n        size: 545 * 1024\n      }, {\n        key: 'photos/animals/elephants.png',\n        modified: +Moment().subtract(3, 'days'),\n        size: 52 * 1024\n      }, {\n        key: 'photos/funny fall.gif',\n        modified: +Moment().subtract(2, 'months'),\n        size: 13.2 * 1024 * 1024\n      }, {\n        key: 'photos/holiday.jpg',\n        modified: +Moment().subtract(25, 'days'),\n        size: 85 * 1024\n      }, {\n        key: 'documents/letter chunks.doc',\n        modified: +Moment().subtract(15, 'days'),\n        size: 480 * 1024\n      }, {\n        key: 'documents/export.pdf',\n        modified: +Moment().subtract(15, 'days'),\n        size: 4.2 * 1024 * 1024\n      }]\n    };\n\n    this.handleCreateFolder = key => {\n      this.setState(state => {\n        state.files = state.files.concat([{\n          key: key\n        }]);\n        return state;\n      });\n    };\n\n    this.handleCreateFiles = (files, prefix) => {\n      this.setState(state => {\n        const newFiles = files.map(file => {\n          let newKey = prefix;\n\n          if (prefix !== '' && prefix.substring(prefix.length - 1, prefix.length) !== '/') {\n            newKey += '/';\n          }\n\n          newKey += file.name;\n          return {\n            key: newKey,\n            size: file.size,\n            modified: +Moment()\n          };\n        });\n        const uniqueNewFiles = [];\n        newFiles.map(newFile => {\n          let exists = false;\n          state.files.map(existingFile => {\n            if (existingFile.key === newFile.key) {\n              exists = true;\n            }\n          });\n\n          if (!exists) {\n            uniqueNewFiles.push(newFile);\n          }\n        });\n        state.files = state.files.concat(uniqueNewFiles);\n        return state;\n      });\n    };\n\n    this.handleRenameFolder = (oldKey, newKey) => {\n      this.setState(state => {\n        const newFiles = [];\n        state.files.map(file => {\n          if (file.key.substr(0, oldKey.length) === oldKey) {\n            newFiles.push({ ...file,\n              key: file.key.replace(oldKey, newKey),\n              modified: +Moment()\n            });\n          } else {\n            newFiles.push(file);\n          }\n        });\n        state.files = newFiles;\n        return state;\n      });\n    };\n\n    this.handleRenameFile = (oldKey, newKey) => {\n      this.setState(state => {\n        const newFiles = [];\n        state.files.map(file => {\n          if (file.key === oldKey) {\n            newFiles.push({ ...file,\n              key: newKey,\n              modified: +Moment()\n            });\n          } else {\n            newFiles.push(file);\n          }\n        });\n        state.files = newFiles;\n        return state;\n      });\n    };\n\n    this.handleDeleteFolder = folderKey => {\n      this.setState(state => {\n        const newFiles = [];\n        state.files.map(file => {\n          if (file.key.substr(0, folderKey.length) !== folderKey) {\n            newFiles.push(file);\n          }\n        });\n        state.files = newFiles;\n        return state;\n      });\n    };\n\n    this.handleDeleteFile = fileKey => {\n      this.setState(state => {\n        const newFiles = [];\n        state.files.map(file => {\n          if (file.key !== fileKey) {\n            newFiles.push(file);\n          }\n        });\n        state.files = newFiles;\n        return state;\n      });\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(FileBrowser, {\n      files: this.state.files,\n      icons: Icons.FontAwesome(4),\n      onCreateFolder: this.handleCreateFolder,\n      onCreateFiles: this.handleCreateFiles,\n      onMoveFolder: this.handleRenameFolder,\n      onMoveFile: this.handleRenameFile,\n      onRenameFolder: this.handleRenameFolder,\n      onRenameFile: this.handleRenameFile,\n      onDeleteFolder: this.handleDeleteFolder,\n      onDeleteFile: this.handleDeleteFile\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nconst mount = document.querySelectorAll('div.demo-mount-nested-editable');\nReactDOM.render( /*#__PURE__*/_jsxDEV(NestedEditableDemo, {}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 183,\n  columnNumber: 3\n}, this), mount[0]);\n\nclass App extends Component {\n  constructor() {\n    super();\n\n    this.syncUpdates = () => {\n      const data = { ...this.state\n      };\n      axios.post(\"http://localhost:5000/update-editor\", data).catch(console.error);\n    };\n\n    this.runCode = () => {\n      const {\n        html,\n        css,\n        js\n      } = this.state;\n      const iframe = this.refs.iframe;\n      const document = iframe.contentDocument;\n      const documentContents = `\n      <!DOCTYPE html>\n      <html lang=\"en\">\n      <head>\n        <meta charset=\"UTF-8\">\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n        <meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\">\n        <title>Document</title>\n        <style>\n          ${css}\n        </style>\n      </head>\n      <body>\n        ${html}\n\n        <script type=\"text/javascript\">\n          ${js}\n        </script>\n      </body>\n      </html>\n    `;\n      document.open();\n      document.write(documentContents);\n      document.close();\n    };\n\n    this.state = {\n      id: \"\",\n      html: \"\",\n      css: \"\",\n      js: \"\"\n    };\n    this.pusher = new Pusher(\"18160601861a89d7f8f7\", {\n      cluster: \"eu\",\n      forceTLS: true\n    });\n    this.channel = this.pusher.subscribe(\"editor\");\n  }\n\n  componentDidUpdate() {\n    this.runCode();\n  }\n\n  componentDidMount() {\n    this.setState({\n      id: pushid()\n    });\n    this.channel.bind(\"text-update\", data => {\n      const {\n        id\n      } = this.state;\n      if (data.id === id) return;\n      this.setState({\n        html: data.html,\n        css: data.css,\n        js: data.js\n      });\n    });\n  }\n\n  render() {\n    const {\n      html,\n      js,\n      css\n    } = this.state;\n    const codeMirrorOptions = {\n      theme: \"material\",\n      lineNumbers: true,\n      scrollbarStyle: null,\n      lineWrapping: true\n    };\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: [/*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"files\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"title-header\",\n          children: \"FILES\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"playground\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"code-editor html-code\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"title-header\",\n            children: \"EDITOR\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CodeMirror, {\n            value: html,\n            options: {\n              mode: \"htmlmixed\",\n              ...codeMirrorOptions\n            },\n            onBeforeChange: (editor, data, html) => {\n              this.setState({\n                html\n              }, () => this.syncUpdates());\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 284,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"result\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"title-header\",\n          children: \"RESULT\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"iframe\", {\n          title: \"result\",\n          className: \"iframe\",\n          ref: \"iframe\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 325,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["D:/Pusher/client/src/App.js"],"names":["React","Component","Controlled","CodeMirror","Pusher","pushid","axios","ReactDOM","FileBrowser","NestedEditableDemo","state","files","key","modified","Moment","subtract","size","handleCreateFolder","setState","concat","handleCreateFiles","prefix","newFiles","map","file","newKey","substring","length","name","uniqueNewFiles","newFile","exists","existingFile","push","handleRenameFolder","oldKey","substr","replace","handleRenameFile","handleDeleteFolder","folderKey","handleDeleteFile","fileKey","render","Icons","FontAwesome","mount","document","querySelectorAll","App","constructor","syncUpdates","data","post","catch","console","error","runCode","html","css","js","iframe","refs","contentDocument","documentContents","open","write","close","id","pusher","cluster","forceTLS","channel","subscribe","componentDidUpdate","componentDidMount","bind","codeMirrorOptions","theme","lineNumbers","scrollbarStyle","lineWrapping","mode","editor"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Controlled as CodeMirror } from \"react-codemirror2\";\nimport Pusher from \"pusher-js\";\nimport pushid from \"pushid\";\nimport axios from \"axios\";\nimport ReactDOM from 'react-dom';\n\nimport FileBrowser from 'react-keyed-file-browser';\n\n\nimport \"codemirror/lib/codemirror.css\";\nimport \"codemirror/theme/material.css\";\n\nimport \"codemirror/mode/htmlmixed/htmlmixed\";\nimport \"codemirror/mode/css/css\";\nimport \"codemirror/mode/javascript/javascript\";\n\nimport \"./App.css\";\n\n\nclass NestedEditableDemo extends React.Component {\n  state = {\n    files: [\n      {\n        key: 'photos/animals/cat in a hat.png',\n        modified: +Moment().subtract(1, 'hours'),\n        size: 1.5 * 1024 * 1024,\n      },\n      {\n        key: 'photos/animals/kitten_ball.png',\n        modified: +Moment().subtract(3, 'days'),\n        size: 545 * 1024,\n      },\n      {\n        key: 'photos/animals/elephants.png',\n        modified: +Moment().subtract(3, 'days'),\n        size: 52 * 1024,\n      },\n      {\n        key: 'photos/funny fall.gif',\n        modified: +Moment().subtract(2, 'months'),\n        size: 13.2 * 1024 * 1024,\n      },\n      {\n        key: 'photos/holiday.jpg',\n        modified: +Moment().subtract(25, 'days'),\n        size: 85 * 1024,\n      },\n      {\n        key: 'documents/letter chunks.doc',\n        modified: +Moment().subtract(15, 'days'),\n        size: 480 * 1024,\n      },\n      {\n        key: 'documents/export.pdf',\n        modified: +Moment().subtract(15, 'days'),\n        size: 4.2 * 1024 * 1024,\n      },\n    ],\n  }\n\n  handleCreateFolder = (key) => {\n    this.setState(state => {\n      state.files = state.files.concat([{\n        key: key,\n      }])\n      return state\n    })\n  }\n  handleCreateFiles = (files, prefix) => {\n    this.setState(state => {\n      const newFiles = files.map((file) => {\n        let newKey = prefix\n        if (prefix !== '' && prefix.substring(prefix.length - 1, prefix.length) !== '/') {\n          newKey += '/'\n        }\n        newKey += file.name\n        return {\n          key: newKey,\n          size: file.size,\n          modified: +Moment(),\n        }\n      })\n\n      const uniqueNewFiles = []\n      newFiles.map((newFile) => {\n        let exists = false\n        state.files.map((existingFile) => {\n          if (existingFile.key === newFile.key) {\n            exists = true\n          }\n        })\n        if (!exists) {\n          uniqueNewFiles.push(newFile)\n        }\n      })\n      state.files = state.files.concat(uniqueNewFiles)\n      return state\n    })\n  }\n  handleRenameFolder = (oldKey, newKey) => {\n    this.setState(state => {\n      const newFiles = []\n      state.files.map((file) => {\n        if (file.key.substr(0, oldKey.length) === oldKey) {\n          newFiles.push({\n            ...file,\n            key: file.key.replace(oldKey, newKey),\n            modified: +Moment(),\n          })\n        } else {\n          newFiles.push(file)\n        }\n      })\n      state.files = newFiles\n      return state\n    })\n  }\n  handleRenameFile = (oldKey, newKey) => {\n    this.setState(state => {\n      const newFiles = []\n      state.files.map((file) => {\n        if (file.key === oldKey) {\n          newFiles.push({\n            ...file,\n            key: newKey,\n            modified: +Moment(),\n          })\n        } else {\n          newFiles.push(file)\n        }\n      })\n      state.files = newFiles\n      return state\n    })\n  }\n  handleDeleteFolder = (folderKey) => {\n    this.setState(state => {\n      const newFiles = []\n      state.files.map((file) => {\n        if (file.key.substr(0, folderKey.length) !== folderKey) {\n          newFiles.push(file)\n        }\n      })\n      state.files = newFiles\n      return state\n    })\n  }\n  handleDeleteFile = (fileKey) => {\n    this.setState(state => {\n      const newFiles = []\n      state.files.map((file) => {\n        if (file.key !== fileKey) {\n          newFiles.push(file)\n        }\n      })\n      state.files = newFiles\n      return state\n    })\n  }\n\n  render() {\n    return (\n      <FileBrowser\n        files={this.state.files}\n        icons={Icons.FontAwesome(4)}\n\n        onCreateFolder={this.handleCreateFolder}\n        onCreateFiles={this.handleCreateFiles}\n        onMoveFolder={this.handleRenameFolder}\n        onMoveFile={this.handleRenameFile}\n        onRenameFolder={this.handleRenameFolder}\n        onRenameFile={this.handleRenameFile}\n        onDeleteFolder={this.handleDeleteFolder}\n        onDeleteFile={this.handleDeleteFile}\n      />\n    )\n  }\n}\n\nconst mount = document.querySelectorAll('div.demo-mount-nested-editable')\nReactDOM.render(\n  <NestedEditableDemo />,\n  mount[0]\n)\n\nclass App extends Component {\n  constructor() {\n    super();\n    this.state = {\n      id: \"\",\n      html: \"\",\n      css: \"\",\n      js: \"\"\n    };\n\n    this.pusher = new Pusher(\"18160601861a89d7f8f7\", {\n      cluster: \"eu\",\n      forceTLS: true\n    });\n\n    this.channel = this.pusher.subscribe(\"editor\");\n  }\n\n  componentDidUpdate() {\n    this.runCode();\n  }\n\n  componentDidMount() {\n    this.setState({\n      id: pushid()\n    });\n\n    this.channel.bind(\"text-update\", data => {\n      const { id } = this.state;\n      if (data.id === id) return;\n\n      this.setState({\n        html: data.html,\n        css: data.css,\n        js: data.js\n      });\n    });\n  }\n\n  syncUpdates = () => {\n    const data = { ...this.state };\n\n    axios\n      .post(\"http://localhost:5000/update-editor\", data)\n      .catch(console.error);\n  };\n\n  runCode = () => {\n    const { html, css, js } = this.state;\n\n    const iframe = this.refs.iframe;\n    const document = iframe.contentDocument;\n    const documentContents = `\n      <!DOCTYPE html>\n      <html lang=\"en\">\n      <head>\n        <meta charset=\"UTF-8\">\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n        <meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\">\n        <title>Document</title>\n        <style>\n          ${css}\n        </style>\n      </head>\n      <body>\n        ${html}\n\n        <script type=\"text/javascript\">\n          ${js}\n        </script>\n      </body>\n      </html>\n    `;\n\n    document.open();\n    document.write(documentContents);\n    document.close();\n  };\n\n  render() {\n    const { html, js, css } = this.state;\n    const codeMirrorOptions = {\n      theme: \"material\",\n      lineNumbers: true,\n      scrollbarStyle: null,\n      lineWrapping: true\n    };\n\n    return (\n      <div className=\"App\">\n        <section className=\"files\">\n          <div className=\"title-header\">FILES</div>\n        </section>\n\n        <section className=\"playground\">\n          <div className=\"code-editor html-code\">\n            <div className=\"title-header\">EDITOR</div>\n            <CodeMirror\n              value={html}\n              options={{\n                mode: \"htmlmixed\",\n                ...codeMirrorOptions\n              }}\n              onBeforeChange={(editor, data, html) => {\n                this.setState({ html }, () => this.syncUpdates());\n              }}\n            />\n          </div>\n          {/* <div className=\"code-editor css-code\">\n            <div className=\"editor-header\">CSS</div>\n            <CodeMirror\n              value={css}\n              options={{\n                mode: \"css\",\n                ...codeMirrorOptions\n              }}\n              onBeforeChange={(editor, data, css) => {\n                this.setState({ css }, () => this.syncUpdates());\n              }}\n            />\n          </div>\n          <div className=\"code-editor js-code\">\n            <div className=\"editor-header\">JavaScript</div>\n            <CodeMirror\n              value={js}\n              options={{\n                mode: \"javascript\",\n                ...codeMirrorOptions\n              }}\n              onBeforeChange={(editor, data, js) => {\n                this.setState({ js }, () => this.syncUpdates());\n              }}\n            />\n          </div> */}\n        </section>\n\n        <section className=\"result\">\n          <div className=\"title-header\">RESULT</div>\n          <iframe title=\"result\" className=\"iframe\" ref=\"iframe\" />\n        </section>\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}